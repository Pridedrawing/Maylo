// app/tracks/[trackSlug]/page.tsx
import { tracks, albums } from "@/data/siteData";
import { notFound } from "next/navigation";
import Image from "next/image";
import Link from "next/link";
import { AudioPlayer } from "@/components/music/AudioPlayer";
import { StreamingLinks } from "@/components/common/StreamingLinks";

interface TrackPageProps {
  params: { trackSlug: string };
}

export default function TrackPage({ params }: TrackPageProps) {
  const track = tracks.find((t) => t.slug === params.trackSlug);
  if (!track) {
    return notFound();
  }

  const album = albums.find((a) => a.id === track.albumId);

  return (
    <div className="mx-auto max-w-4xl px-4 py-10 md:px-6 md:py-16">
      <Link href="/music" className="mb-4 inline-block text-sm underline">
        ‚Üê Back to music
      </Link>

      <div className="mb-6 flex flex-col gap-6 md:flex-row">
        <div className="relative h-60 w-60 overflow-hidden rounded-2xl border border-white/10">
          <Image
            src={track.coverImage}
            alt={track.title}
            fill
            className="object-cover"
            sizes="240px"
          />
        </div>

        <div className="flex-1 space-y-3">
          <h1 className="text-2xl font-semibold">{track.title}</h1>

          {album && (
            <Link
              href={`/music/${album.slug}`}
              className="text-sm text-neutral-300 underline"
            >
              From album: {album.title}
            </Link>
          )}

          <div className="mt-2">
            <AudioPlayer src={track.audioSrc} />
          </div>

          {track.description && (
            <p className="text-sm text-neutral-300">{track.description}</p>
          )}

          {track.streaming && (
            <div className="mt-2">
              <StreamingLinks links={track.streaming} />
            </div>
          )}
        </div>
      </div>
    </div>
  );
}
